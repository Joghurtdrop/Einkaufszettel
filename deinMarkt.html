<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="general.css">
<link rel="stylesheet" href="deinMarkt.css">
</head>
<body>

<div class="navbar">
	<ul>
		<li><a href="einkaufszettel.html">Einkaufszettel</a></li><!--
        --><li><a class="active">Dein Markt</a></li><!--
        --><li class="rightAlign"><a href="profil.html">Profil</a></li>
	</ul>
</div>

<div class="main">
  <h1>Fixed Top Menu</h1>
  <h2>Scroll this page to see the effect</h2>
  <h2>The navigation bar will stay at the top of the page while scrolling</h2>

<div class="card">
    <div id="item1" class="column" draggable="true">
        AgarAgar
    </div>
    <br>
    <div id="item2" class="column" draggable="true">
        Brot
    </div>
    <br>
    <div id="item3" class="column" draggable="true">
        Cumquat
    </div>
    <br>
    <div id="item4" class="column" draggable="true">
        Dosenmais
    </div>
</div>

<p>Some text some text some text some text..</p>
<p>Some text some text some text some text..</p>
<p>Some text some text some text some text..</p>
<p>Some text some text some text some text..</p>
<p>Some text some text some text some text..</p>
<p>Some text some text some text some text..</p>

</div>
<script>

function handleDragStart(e) {
    this.style.opacity = '0.4';

    dragSrcEl = this;

    e.dataTransfer.effectAllowed = 'move';
    e.dataTransfer.setData('text', this.innerHTML);
    console.log(this.innerHTML);
}

function handleDragOver(e) {
    if (e.preventDefault) {
        e.preventDefault();
    }

    e.dataTransfer.dropEffect = 'move';

    return false;
}

function handleDragEnter(e) {
    this.classList.add('over');
}

function handleDragLeave(e) {
    this.classList.remove('over');
}

function handleDrop(e) {
    if (e.stopPropagation) {
        e.stopPropagation();
    }
    if (dragSrcEl != this) {
        /* var data = e.dataTransfer.getData('text');
        e.target.appendChild(document.getElementById(data)); */
         dragSrcEl.innerHTML = this.innerHTML;
           this.innerHTML = e.dataTransfer.getData('text/plain');
           console.log(e.dataTransfer.getData('text/plain')); 
    }
    return false;
}

function handleDragEnd(e) {
    this.style.opacity = '1.0';
    console.log("ende");
    console.log(this);
    [].forEach.call(cols, function (col) {
            col.classList.remove('over');
            });
}

var cols = document.querySelectorAll('.column');
[].forEach.call(cols, function(col){
        col.addEventListener('dragstart', handleDragStart, false)
        col.addEventListener('dragenter', handleDragEnter, false)
        col.addEventListener('dragover', handleDragOver, false)
        col.addEventListener('dragleave', handleDragLeave, false)
        col.addEventListener('drop', handleDrop, false)
        col.addEventListener('dragend', handleDragEnd, false)
        });

</script>
</body>
</html>
